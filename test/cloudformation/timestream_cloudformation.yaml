AWSTemplateFormatVersion: "2010-09-09"
Description: Resources used for monitoring the scale testing runs using Timestream
Parameters:
  DatabaseName:
    Type: String
    Description: "Timestream database to forward test metrics to"
  TableName:
    Type: String
    Description: "Timestream table to forward test metrics to"
Resources:
  TimestreamDatabase:
    Type: AWS::Timestream::Database
    Properties:
      DatabaseName: !Sub "${DatabaseName}"
  TimestreamTable:
    Type: "AWS::Timestream::Table"
    Properties:
      DatabaseName: !Ref "TimestreamDatabase"
      TableName: !Sub "${TableName}"
      MagneticStoreWriteProperties:
        EnableMagneticStoreWrites: true
      RetentionProperties:
        MemoryStoreRetentionPeriodInHours: "731" # A full month of memory store retention
        MagneticStoreRetentionPeriodInDays: "1825" # 5 years of magnetic store retention